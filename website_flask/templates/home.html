{% extends "base.html" %} 
{% block title %}Home{% endblock %}

{% block content %}
<div class="container mt-5 bg-dark text-light">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="jumbotron p-5 rounded">
                <h1 class="display-4">NOTES HERE</h1>
                <p class="lead">Your notes are safe here with authentication</p>
                <hr class="my-4">
                <p>You can sign up for a new account or log in if you already have one.</p>
                <div class="mt-4">
                    <a class="btn btn-primary btn-lg me-2" href="/auth/signup" role="button">Sign Up</a>
                    <a class="btn btn-outline-primary btn-lg" href="/auth/login" role="button">Login</a>
                </div>
                <br />
                <br />
<h1 align="center">Notes</h1>
<ul class="list-group list-group-flush" id="notes">
    {% for note in user.notes %}
    <li class="list-group-item d-flex justify-content-between align-items-center bg-dark text-light">
        {{note.data}}
        <button type="button" class="btn-close btn-close-white" onClick="deleteNote({{ note.id }})" aria-label="Close"></button>
    </li>
    {% endfor %}
</ul>
<form method="POST">
    <textarea name="note" id="note" class="form-control bg-dark text-light"></textarea>
    <br />
    <div align="center">
        <button type="submit" class="btn btn-primary">ADD NOTE</button>
    </div>
</form>


            </div>
        </div>
    </div>
</div>

<script>
    function deleteNote(noteId) {
        fetch('/delete-note', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ noteId: noteId })
        }).then(response => {
            if (response.ok) {
                // Reload the page to reflect changes
                location.reload();
            } else {
                alert('Failed to delete note');
            }
        });
    }
</script>
{% endblock %}